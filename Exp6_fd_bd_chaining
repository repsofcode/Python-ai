def forward_chaining(facts, rules):
    inferred = set()
    while True:
        new_fact_added = False
        for lhs, rhs in rules:
            if lhs.issubset(facts) and rhs not in facts:
                facts.add(rhs)
                inferred.add(rhs)
                new_fact_added = True
        if not new_fact_added:
            break
    return inferred
    def backward_chaining(goal, facts, rules):
    stack = [goal]
    needed = set()

    while stack:
        g = stack.pop()

        # already true fact â†’ no need to derive
        if g in facts:
            needed.add(g)
            continue

        # find rule that produces g
        rule_found = False
        for lhs, rhs in rules:
            if rhs == g:
                rule_found = True
                stack.extend(lhs - facts)   # facts needed
                stack.extend(lhs & facts)   # already known
        if not rule_found:
            return None   # cannot derive goal

    return needed
    
    facts = {"sun is shining", "car has fuel"}
rules = [
    ({"car has fuel", "sun is shining"}, "go for a drive"),
    ({"go for a drive"}, "reach destination")
]

# forward chaining
inferred = forward_chaining(set(facts), rules)
print("Inferred facts:", inferred)

# backward chaining
goal = "reach destination"
needed = backward_chaining(goal, facts, rules)

if needed:
    print("Needed facts to achieve goal:", needed)
else:
    print("Goal cannot be achieved with given facts and rules.")
